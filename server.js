/******************************************************
 * PLEASE DO NOT EDIT THIS FILE
 * the verification process may break
 * ***************************************************/

'use strict';


const express = require('express');
const hostinfo = require('./hostInfo');

const app = express();

app.get('/api/userinfo', function (request, response) {
    console.log(request.headers["accept-language"]);
    let userInfo;
    hostinfo.getHostIp().then(userIpAddress =>{

        userInfo = {
            "ipaddress": userIpAddress,
            "language": hostinfo.getUserLanguage(request.headers["accept-language"]),
            "software": hostinfo.getUserOS(request.headers["user-agent"])
        };

      response.json(userInfo);
    });


});
app.listen(3000, function (err, data) {
    if (err) {
        throw err
    }
    console.log('Node.js listening on  3000 ... ');
});
module.exports = app;
